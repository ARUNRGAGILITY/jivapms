{% extends 'app_common/common_files/base_template.html' %}
{% load static %}

{% block content %}
{% include 'app_common/common_files/navbar.html' %}

{% include 'app_jivapms/mod_web/common_files/css.html' %}

    <div class="content-wrapper">
        <!-- Breadcrumb navigation -->
        <nav aria-label="breadcrumb" class="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">Home</a></li>
                <li class="breadcrumb-item"><a href="{% url 'list_organizations' %}">Organizations</a></li>
                <li class="breadcrumb-item"><a href="{% url 'list_organizations' %}">{{project.org}}</a></li>
                <li class="breadcrumb-item"><a href="{% url 'list_projects' project.org.id %}">Projects</a></li>
                <li class="breadcrumb-item active" aria-current="page">{{project}}</li>
            </ol>
        </nav>

    <!-- PROJECT NEEDS TO BE INITIATED -->
    {% if project_administration.project_state == 'Initiation' %} 
        {% include 'app_organization/mod_project/project_initiation_page.html' %}
    {% else %}
        {% include 'app_organization/mod_project/block_editable_project_homepage.html' %}
    {% endif %}

    </div>

<!-- PROJECT ALREADY INITIATED -->
    <script>
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('open');  // Toggle the 'open' class
        }
    </script>
    <script>
        function makeEditable(element) {
            element.contentEditable = true;
            element.focus();
        }
        
    
        function save_element_text(element, id,  appName, modelName, fieldName) {
            element.contentEditable = false;
            $.ajax({
                url: '/common/common_ajax/ajax_save_element_text/',
                type: 'POST',
                data : {
                'csrfmiddlewaretoken': "{{ csrf_token }}",
                'model_name': modelName,
                'app_name': appName,
                'field_name': fieldName,
                'text': element.textContent, 
                'id': id,
                },
                dataType: 'json',
                success: function(data) {
                console.log(data);
                }
            })
        }
    
        function save_related_element_text(element, appName, parentModelName, parentId, parentModelKey, childModelName, fieldName) {
            element.contentEditable = false;
            $.ajax({
                url: '/common/common_ajax/ajax_save_related_model/',
                type: 'POST',
                data : {
                'csrfmiddlewaretoken': "{{ csrf_token }}",
                'app_name': appName,
                'parent_model': parentModelName,
                'parent_id': parentId,
                'parent_model_key': parentModelKey,
                'child_model': childModelName,
                'field_name': fieldName,
                'text': element.textContent, 
    
                },
                dataType: 'json',
                success: function(data) {
                console.log(data);
                }
            })
        }
    </script>
    
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.3.16/jstree.min.js" integrity="sha512-ekwRoEshEqHU64D4luhOv/WNmhml94P8X5LnZd9FNOiOfSKgkY12cDFz3ZC6Ws+7wjMPQ4bPf94d+zZ3cOjlig==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.3.16/jstree.min.js" integrity="sha512-ekwRoEshEqHU64D4luhOv/WNmhml94P8X5LnZd9FNOiOfSKgkY12cDFz3ZC6Ws+7wjMPQ4bPf94d+zZ3cOjlig==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
<!-- End: Content -->
{% endblock content %}